"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[514],{37514:(I,m,e)=>{e.r(m),e.d(m,{ccipRequest:()=>R,offchainLookup:()=>T,offchainLookupAbiItem:()=>O,offchainLookupSignature:()=>C});var g=e(49671),x=e(19934),b=e(30038),f=e(32618),v=e(41448);class E extends f.G{constructor({callbackSelector:a,cause:t,data:c,extraData:u,sender:i,urls:n}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",n&&["  Gateway URL(s):",...n.map(l=>`    ${(0,v.Gr)(l)}`)],`  Sender: ${i}`,`  Data: ${c}`,`  Callback selector: ${a}`,`  Extra data: ${u}`].flat()}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"})}}class G extends f.G{constructor({result:a,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,v.Gr)(t)}`,`Response: ${(0,b.P)(a)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"})}}class M extends f.G{constructor({sender:a,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${a}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"})}}var L=e(23979),w=e(41936),S=e(62910),$=e(9007),P=e(80770),A=e(37812);const C="0x556f1830",O={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};function T(s,a){return d.apply(this,arguments)}function d(){return(d=(0,g.Z)(function*(s,{blockNumber:a,blockTag:t,data:c,to:u}){const{args:i}=(0,w.p)({data:c,abi:[O]}),[n,l,r,o,k]=i,{ccipRead:p}=s,j=p&&"function"==typeof p?.request?p.request:R;try{if(!(0,$.E)(u,n))throw new M({sender:n,to:u});const y=yield j({data:r,sender:n,urls:l}),{data:D}=yield(0,x.R)(s,{blockNumber:a,blockTag:t,data:(0,P.zo)([o,(0,S.E)([{type:"bytes"},{type:"bytes"}],[y,k])]),to:u});return D}catch(y){throw new E({callbackSelector:o,cause:y,data:c,extraData:k,sender:n,urls:l})}})).apply(this,arguments)}function R(s){return h.apply(this,arguments)}function h(){return(h=(0,g.Z)(function*({data:s,sender:a,urls:t}){let c=new Error("An unknown error occurred.");for(let u=0;u<t.length;u++){const i=t[u],n=i.includes("{data}")?"GET":"POST",l="POST"===n?{data:s,sender:a}:void 0;try{const r=yield fetch(i.replace("{sender}",a).replace("{data}",s),{body:JSON.stringify(l),method:n});let o;if(o=r.headers.get("Content-Type")?.startsWith("application/json")?(yield r.json()).data:yield r.text(),!r.ok){c=new L.Gg({body:l,details:o?.error?(0,b.P)(o.error):r.statusText,headers:r.headers,status:r.status,url:i});continue}if(!(0,A.v)(o)){c=new G({result:o,url:i});continue}return o}catch(r){c=new L.Gg({body:l,details:r.message,url:i})}}throw c})).apply(this,arguments)}}}]);